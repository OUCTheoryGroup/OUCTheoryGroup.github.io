import{j as a,d as I,k as b,l as $,m as G,E as L}from"./element-plus-C_c9kMY5.js";import{q as j,z,x as D}from"./@element-plus-W9iT9tjK.js";import{_ as R}from"./index-Bu0mnn7G.js";import{_ as T,a as q}from"./plugin-vueexport-helper-ffJgro2v.js";import{r as c,c as d,Q,P as o,V as f,L as l,o as n,T as x,u as g,a as r}from"./@vue-BNSRWWJn.js";import"./lodash-es-QeLhLsho.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-Bd7NwZzn.js";import"./dayjs-CdCgAjqw.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./vue-router-BYwqdpxB.js";import"./axios-CCb-kr4I.js";const S={class:"container mx-auto flex flex-col items-center max-h-screen p-4 space-y-4"},A={key:1,class:"space-y-4"},H={key:0,class:"upload-trigger"},J=["src"],K={class:"el-upload-list__item-actions"},O=["onClick"],W=["onClick"],X={key:2,class:"flex items-center justify-center w-full"},Z={key:0},F={key:1,class:"text-center text-gray-500"},ee=["src"],te={__name:"MonthlyForecastPredictView",setup(le){const m=c(null),_=c([]),p=c(!1),i=c([]),y=c(""),v=c(!1),V=t=>t.type==="image/png"?!0:(a.error("仅支持PNG文件"),!1),w=t=>{t.status==="ready"||(t.status==="success"?a.success(`${t.name} 文件上传成功`):t.status==="error"&&a.error(`${t.name} 文件上传失败`))},P=()=>{a.warning("最多只能上传14张图片")},k=t=>{y.value=t.url,v.value=!0},C=t=>{i.value=i.value.filter(e=>e.uid!==t.uid)},E=()=>{if(!m.value){a.error("请选择月份");return}if(i.value.length!==14){a.error("请上传14张图片");return}const[t,e]=m.value.split("-");q(parseInt(t),parseInt(e)-1).then(u=>{_.value=u,p.value=!0}).catch(u=>{a.error("预测失败，请稍后重试"),console.error(u)})},M=()=>{p.value=!1,_.value=[],m.value=null};return(t,e)=>{const u=I,h=L,U=b,Y=$,B=G;return n(),d("div",S,[p.value?(n(),Q(u,{key:0,onClick:M},{default:o(()=>e[3]||(e[3]=[x(" 返回 ")])),_:1})):f("",!0),p.value?f("",!0):(n(),d("div",A,[l(U,{"file-list":i.value,"onUpdate:fileList":e[0]||(e[0]=s=>i.value=s),class:"upload-demo",action:"https://seaice.52lxy.one:20443/seaice/png-upload",accept:".png",multiple:!0,limit:14,"list-type":"picture-card","before-upload":V,"on-preview":k,"on-change":w,"on-exceed":P},{default:o(()=>[i.value.length<14?(n(),d("div",H,[l(h,{class:"upload-icon"},{default:o(()=>[l(g(j))]),_:1}),e[4]||(e[4]=r("div",{class:"upload-text"},"Upload",-1))])):f("",!0)]),file:o(({file:s})=>[r("div",null,[r("img",{class:"el-upload-list__item-thumbnail",src:s.url,alt:""},null,8,J),r("span",K,[r("span",{class:"el-upload-list__item-preview",onClick:N=>k(s)},[l(h,null,{default:o(()=>[l(g(z))]),_:1})],8,O),r("span",{class:"el-upload-list__item-delete",onClick:N=>C(s)},[l(h,null,{default:o(()=>[l(g(D))]),_:1})],8,W)])])]),_:1},8,["file-list"]),l(Y,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),type:"month",placeholder:"选择月份",format:"YYYY/MM","value-format":"YYYY-MM"},null,8,["modelValue"]),l(u,{type:"primary",onClick:E},{default:o(()=>e[5]||(e[5]=[x("提交")])),_:1})])),p.value?(n(),d("div",X,[_.value.length?(n(),d("div",Z,[l(R,{images:_.value},null,8,["images"])])):(n(),d("div",F,"请上传图片并选择月份以查看预测结果"))])):f("",!0),l(B,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s)},{default:o(()=>[r("img",{"w-full":"",src:y.value,alt:"Preview Image"},null,8,ee)]),_:1},8,["modelValue"])])}}},ve=T(te,[["__scopeId","data-v-65f4345e"]]);export{ve as default};
