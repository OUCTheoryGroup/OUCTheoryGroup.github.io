import{r as c,c as d,e as N,w as a,f,b as l,_ as I,E as $,o,g as x,d as g,p as G,a as n,z,h as D,i as L}from"./index-DaA0Xemu.js";import{_ as R,E as r,c as j,a as S,b as T}from"./_plugin-vue_export-helper-Bo_mlQwW.js";import{E as q}from"./el-scrollbar-CGzrGxzc.js";const A={class:"container mx-auto flex flex-col items-center max-h-screen p-4 space-y-4"},H={key:1,class:"space-y-4"},J={key:0,class:"upload-trigger"},K=["src"],O={class:"el-upload-list__item-actions"},Q=["onClick"],W=["onClick"],X={key:2,class:"flex items-center justify-center w-full"},Z={key:0},F={key:1,class:"text-center text-gray-500"},ee=["src"],te={__name:"MonthlyForecastPredictView",setup(le){const _=c(null),m=c([]),p=c(!1),i=c([]),y=c(""),v=c(!1),V=t=>t.type==="image/png"?!0:(r.error("仅支持PNG文件"),!1),w=t=>{t.status==="ready"||(t.status==="success"?r.success(`${t.name} 文件上传成功`):t.status==="error"&&r.error(`${t.name} 文件上传失败`))},E=()=>{r.warning("最多只能上传14张图片")},k=t=>{y.value=t.url,v.value=!0},C=t=>{i.value=i.value.filter(e=>e.uid!==t.uid)},M=()=>{if(!_.value){r.error("请选择月份");return}if(i.value.length!==14){r.error("请上传14张图片");return}const[t,e]=_.value.split("-");j(parseInt(t),parseInt(e)-1).then(u=>{m.value=u,p.value=!0}).catch(u=>{r.error("预测失败，请稍后重试"),console.error(u)})},P=()=>{p.value=!1,m.value=[],_.value=null};return(t,e)=>{const u=$,h=L,b=S,U=q,Y=T;return o(),d("div",A,[p.value?(o(),N(u,{key:0,onClick:P},{default:a(()=>e[3]||(e[3]=[x(" 返回 ")])),_:1})):f("",!0),p.value?f("",!0):(o(),d("div",H,[l(b,{"file-list":i.value,"onUpdate:fileList":e[0]||(e[0]=s=>i.value=s),class:"upload-demo",action:"https://seaice.52lxy.one:20443/seaice/png-upload",accept:".png",multiple:!0,limit:14,"list-type":"picture-card","before-upload":V,"on-preview":k,"on-change":w,"on-exceed":E},{default:a(()=>[i.value.length<14?(o(),d("div",J,[l(h,{class:"upload-icon"},{default:a(()=>[l(g(G))]),_:1}),e[4]||(e[4]=n("div",{class:"upload-text"},"Upload",-1))])):f("",!0)]),file:a(({file:s})=>[n("div",null,[n("img",{class:"el-upload-list__item-thumbnail",src:s.url,alt:""},null,8,K),n("span",O,[n("span",{class:"el-upload-list__item-preview",onClick:B=>k(s)},[l(h,null,{default:a(()=>[l(g(z))]),_:1})],8,Q),n("span",{class:"el-upload-list__item-delete",onClick:B=>C(s)},[l(h,null,{default:a(()=>[l(g(D))]),_:1})],8,W)])])]),_:1},8,["file-list"]),l(U,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),type:"month",placeholder:"选择月份",format:"YYYY/MM","value-format":"YYYY-MM"},null,8,["modelValue"]),l(u,{type:"primary",onClick:M},{default:a(()=>e[5]||(e[5]=[x("提交")])),_:1})])),p.value?(o(),d("div",X,[m.value.length?(o(),d("div",Z,[l(I,{images:m.value},null,8,["images"])])):(o(),d("div",F,"请上传图片并选择月份以查看预测结果"))])):f("",!0),l(Y,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=s=>v.value=s)},{default:a(()=>[n("img",{"w-full":"",src:y.value,alt:"Preview Image"},null,8,ee)]),_:1},8,["modelValue"])])}}},ne=R(te,[["__scopeId","data-v-9653338b"]]);export{ne as default};
